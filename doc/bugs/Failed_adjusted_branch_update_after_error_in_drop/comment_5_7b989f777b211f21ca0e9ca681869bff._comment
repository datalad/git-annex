[[!comment format=mdwn
 username="gioele@678b7c03f524f2669b179b603f65352fcc16774e"
 nickname="gioele"
 avatar="http://cdn.libravatar.org/avatar/366dbda84e78aff8a8a070622aeb63ce"
 subject="comment 5"
 date="2023-03-25T08:47:01Z"
 content="""
> I wonder if there are other situations where modifications can prevent checkout of the updated adjusted branch?

I clearly remember seeing something similar when a `sync` failed due a non-recoverable network failure. Unfortunately I have no logs from that day.

> It seems wise for git-annex to defend against it in depth, by making sure no crash can leave it in detached head state.

Perhaps also extend `fsck` to automatically recover from such a state? Or at least suggest a couple of possible solutions to the user?
"""]]
